(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},,,,,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){for(var r=e.value,o=t+(n||""),a=document.activeElement,i=0,s=0;i<r.length&&i<o.length&&r[i]===o[i];)i++;for(;r.length-s-1>=0&&o.length-s-1>=0&&r[r.length-s-1]===o[o.length-s-1];)s++;i=Math.min(i,Math.min(r.length,o.length)-s),e.setSelectionRange(i,r.length-s);var c=o.substring(i,o.length-s);if(e.focus(),!document.execCommand("insertText",!1,c)){e.value=o;var d=document.createEvent("Event");d.initEvent("input",!0,!0),e.dispatchEvent(d)}return e.setSelectionRange(t.length,t.length),a&&a.focus(),e}},,function(e,t,n){!function(){var t=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],n="undefined"!=typeof window,r=n&&null!=window.mozInnerScreenX;function o(e,o,a){if(!n)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var i=a&&a.debug||!1;if(i){var s=document.querySelector("#input-textarea-caret-position-mirror-div");s&&s.parentNode.removeChild(s)}var c=document.createElement("div");c.id="input-textarea-caret-position-mirror-div",document.body.appendChild(c);var d=c.style,l=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,u="INPUT"===e.nodeName;d.whiteSpace="pre-wrap",u||(d.wordWrap="break-word"),d.position="absolute",i||(d.visibility="hidden"),t.forEach(function(e){u&&"lineHeight"===e?d.lineHeight=l.height:d[e]=l[e]}),r?e.scrollHeight>parseInt(l.height)&&(d.overflowY="scroll"):d.overflow="hidden",c.textContent=e.value.substring(0,o),u&&(c.textContent=c.textContent.replace(/\s/g," "));var f=document.createElement("span");f.textContent=e.value.substring(o)||".",c.appendChild(f);var p={top:f.offsetTop+parseInt(l.borderTopWidth),left:f.offsetLeft+parseInt(l.borderLeftWidth),height:parseInt(l.lineHeight)};return i?f.style.backgroundColor="#aaa":document.body.removeChild(c),p}void 0!==e.exports?e.exports=o:n&&(window.getCaretCoordinates=o)}()},,,function(e,t,n){n(20),n(21),n(22),e.exports=n(39)},function(e,t){!function(){var e,t={},n=function(e,t){for(var n in t){var r=String(t[n]);e=(e=(e=e.replace(new RegExp(":"+n,"g"),r)).replace(new RegExp(":"+n.toUpperCase(),"g"),r.toUpperCase())).replace(new RegExp(":"+(n.charAt(0).toUpperCase()+n.substr(1)),"g"),r.charAt(0).toUpperCase()+r.substr(1))}return e},r={get:function(r,o,a){var i=e;if(a&&(i=a),void 0===t[i][r]){var s={};for(var c in t[i])c.indexOf(r+".")>-1&&(s[c]=t[i][c]);return function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(s)?r:s}var d=t[i][r];return o&&(d=n(d,o)),d},has:function(n){return void 0!==t[e][n]},choice:function(r,o,a){if(void 0===t[e][r])return r;var i,s=t[e][r].split("|");return i=1==o?s[0]:s[1],a&&(i=n(i,a)),i},setLocale:function(n){if(e=n,!t[n])throw new Error('No messages defined for locale: "'+n+'". Did you forget to enable it in the configuration?')},locale:function(){return e},addMessages:function(e){for(var n in e)t[n]=e[n]}};this.Lang=r,this.trans=r.get,this.transChoice=r.choice}()},function(e,t){Lang.addMessages({en:{"js.are_you_sure_you_want_to_delete":"Are you sure you want to delete this?","js.insert_a_date":"Insert a date","js.drop_any_file":"Drop any file you want to upload, or click here."},fr:{"js.are_you_sure_you_want_to_delete":"Êtes-vous sûr de vouloir supprimer ceci ?","js.insert_a_date":"Insérer une date","js.drop_any_file":"Déposez le fichier que vous souhaitez envoyer, ou bien cliquez ici."}})},function(e,t,n){n(23),n(26),n(27),n(34),n(35),n(36),n(37)},function(e,t,n){window.$=window.jQuery=n(1),n(9),n(12),n(5),n(24),n(25),$(function(){$("#mobileNavToggle").click(function(e){$(this).parents("div:eq(0)").attr("class","d-none"),$(".bd-sidebar > .bd-sidebar-content").hide().attr("class","bd-sidebar-content d-block d-lg-none").slideDown("fast")}),$(".bd-flash-messages > div").slideDown("fast",function(){var e=$(this),t=setInterval(function(){clearInterval(t),e.slideUp("fast")},5e3)}),$("select").selectpicker(),$('form input[name="_method"][value="DELETE"]').parent("form").on("submit",function(){return window.confirm(Lang.get("js.are_you_sure_you_want_to_delete"))})})},,,function(e,t,n){var r=n(7);$(function(){$("form textarea.form-control").keypress(function(e){var t=(e=e.originalEvent).keyCode?e.keyCode:e.which;13!==t&&10!==t||!e.ctrlKey||$(this).parents("form").first().trigger("submit")});$("div.hide-and-show-next-form").on("dblclick taphold",function(e){e.preventDefault(),$(this).addClass("hide");var t=$(this).next("form:eq(0)");t.removeClass("hide"),r.update(t.find("textarea.form-control"))})})},function(e,t,n){var r=n(13),o=r.Textcomplete,a=r.Textarea;$(function(){$("form textarea.form-control").each(function(e,t){var n=$(t).parents("form:eq(0)"),r=n.attr("action"),i=new a(t),s=new o(i);!function(e,t){t.register([{match:/(^|\s)[@](\w*)$/,search:function(t,n){$.getJSON("/"+e.match(/(universes\/\d)/)[1]+"/people/search",{q:t},function(e){n(e)})},replace:function(e){return"$1["+e.id+"]"},template:function(e){return e.id+e.label}}])}(r,s),n.hasClass("diary")||n.hasClass("wiki")&&function(e,t){t.register([{match:/(^|\s)[#](\w*)$/,search:function(t,n){$.getJSON("/"+e.match(/(universes\/\d)/)[1]+"/stories/search",{q:t},function(e){n(e)})},replace:function(e){return"$1["+e.id+"]"},template:function(e){return e.label+" <em>("+e.id+")</em>"}}])}(r,s)})})},,,,,,,function(e,t,n){n(5);var r=n(2),o=n(17);$(function(){var e=["gif","jpg","jpeg","png"],t=$('input[name="_token"]:eq(0)').val();$("textarea").each(function(){var n=$(this),a=n.parents("form:eq(0)"),i=$('<div class="toolbar"></div>');n.after(i),a.hasClass("diary")&&function(e,t){var n=$("<a><span class='oi oi-calendar' title='calendar' aria-hidden='true'></span>"+Lang.get("js.insert_a_date")+"</a>").attr("href","javascript:void(0)").datepicker({calendarWeeks:!0,autoclose:!0,language:Lang.locale()}).on("changeDate",function(t){e.trigger("focus"),e[0].insertAtCaret("["+r(t.date).format("YYYY-MM-DD")+"]")});t.append(n)}(n,i),function(n,r){if("undefined"==typeof URL_FILE_UPLOAD)return console.error("_URL_FILE_UPLOAD must be defined for file upload to work properly."),!1;var a=$(this).attr("id");a||(a="elm_"+Math.random().toString(36).substr(2,10),n.attr("id",a));var i=$("<a><span class='oi oi-data-transfer-upload' title='upload' aria-hidden='true'></span> "+Lang.get("js.drop_any_file")+"</a>").attr("href","javascript:void(0)");r.append(i),new o("#"+a,{paramName:"file",url:URL_FILE_UPLOAD,clickable:i[0],autoProcessQueue:!0,uploadMultiple:!1,params:{_token:t}}).on("success",function(t,r){n.trigger("focus"),n[0].insertAtCaret((e.indexOf(r.extension)>-1?"!":"")+"["+r.fileName+"]("+r.path+")")})}(n,i)})}),HTMLTextAreaElement.prototype.insertAtCaret=function(e){if(e=e||"",document.selection)this.focus(),document.selection.createRange().text=e;else if(this.selectionStart||0===this.selectionStart){var t=this.selectionStart,n=this.selectionEnd;this.value=this.value.substring(0,t)+e+this.value.substring(n,this.value.length),this.selectionStart=t+e.length,this.selectionEnd=t+e.length}else this.value+=e}},function(e,t,n){n(18),$(function(){var e=$("#debrief-universe-tree");if(e.length>0){var t=e.data("read-url"),n=e.data("write-url");e.jstree({core:{data:{url:t,data:function(e){return{id:e.id}}},check_callback:function(e,t,n,r,o){return!0},multiple:!1,themes:{name:"proton",responsive:!0},dnd:{copy:!1,use_html5:!0,inside_pos:"last"},state:{key:"demo2"}},plugins:["dnd","state","search"]}).on("move_node.jstree",function(e,t){$.ajax(n,{method:"PUT",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{node_id:t.node.id,parent_node:t.parent,node_position:t.position},complete:function(e){},dataType:"json"})}).on("activate_node.jstree",function(t,n){e.jstree("save_state"),location.href=n.node.a_attr.href}).on("ready.jstree",function(){e.jstree("restore_state");var t=e.data("current-node");t||(t=e.find("> ul > li:eq(0)").attr("id"));var n=setInterval(function(){clearInterval(n),e.jstree("deselect_all"),e.jstree("open_node",t,function(){e.jstree("select_node",t)})},500)})}$("#search-input").keypress(function(t){var n=$(this);clearInterval(r);var r=setInterval(function(){var t;clearInterval(r),t=n.val(),e.jstree("search",t)},500)})})},function(e,t,n){var r=n(2);$(function(){var e=$(".bootstrap-datepicker").datepicker({calendarWeeks:!0,language:Lang.locale()}),t=e.data("current-node");void 0!==t&&e.datepicker("update",r(t).toDate()),e.on("changeDate",function(t){location.href=e.data("story-base-url")+"/"+r(t.date).format("YYYY-MM-DD")})})},function(e,t,n){var r=n(7);$(function(){r($("textarea.form-control"))})},,function(e,t){}],[[19,1,2]]]);
//# sourceMappingURL=app.js.map